<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>ROC </title>
	<link rel="stylesheet" href="assets/css/bootstrap.min.css?2019827" />
	<link rel="stylesheet" href="assets/css/global.css?2019827" />
	<!-- Font Awesome -->
	<link rel="stylesheet" href="assets/css/font-awesome.min.css?2019827" />
	<!-- Theme style -->
	<link rel="stylesheet" href="assets/css/AdminLTE.min.css?2019827" />
	<link rel="stylesheet" href="assets/css/skins/skin-black.min.css?2019827" />
	<link rel="stylesheet" href="assets/css/index.css?2019827">
</head>

<style scoped>
	[class*="col-grid-s"]>li {
		width: 410px;
	}

	.nav-tabs-custom li {
		width: 120%;
	}

	.box .box-footer {
		border-top: 0px;
	}

	.label {
		font-size: 120%;
	}

	.el-dialog {
		width: 30%;
	}

	td span small {
		cursor: pointer;
	}

	.el-button--mini,
	.el-button--mini.is-round {
		padding: 1px 3px;
		color: #fff
	}

	.viswCard span {
		color: #fff;
		margin-right: 0px;
	}

	.viswCard {
		position: inherit;
		top: 4px;
		text-align: center;
	}

	.table-hover td {
		text-indent: 6px;
	}

	.table>tbody>tr.add>td,
	.table>tbody>tr>td.res {
		font-weight: bold;
		color: #333;
	}

	.table.res td .label {
		margin-left: 5px;
		float: right;
	}



	tr td:nth-child(4),
	tr.res td:nth-child(5) {
		background-color: rgb(218, 219, 219);
	}

	tr.res td:nth-child(4) {
		background-color: #fff;
	}

	div.col-xs-2 {
		padding: 0px !important;
		width: 33% !important;
	}

	/* 	div.col-xs-2.hover {
		width: 12.5% !important;
	} */

	.dataTable td {
		height: 45px;
	}

	.el-checkbox-group {
		margin-right: 0px;
		margin-left: 13px;
		float: left;
	}

	.el-checkbox__label {
		padding-left: 2px !important;
	}

	.el-checkbox__inner {
		vertical-align: 1px;
	}

	.col-xs-2.hover:hover {
		background: #f6fbfd;
	}

	.rescss {
		font-size: 35px !important;
		display: inline-block;
		height: 20px;
		line-height: 20px;
		vertical-align: -1px;
		margin-top: 8px;
	}
</style>


<body>
	<!-- hold-transition skin-blue-light sidebar-mini sidebar-collapse -->
	<div class="wrapper" id="content" style="background:#f1f4f6; margin-top:2px; margin-bottom: 30px;">
		<!--   Trap Destinations -->
		<div class="box">

			<!-- 	<div class="box-body" style="text-align: center; height: 95vh;" v-show="dataimg">
				<img src="assets/images/wifi.gif" style="margin-top: 10%;">
			</div> -->

			<div class="box-body table-responsive no-padding">
				<!--  v-show="databox" -->
				<div class="col-xs-2 ">
					<table class="table res table-bordered  dataTable first">
						<tbody>
							<tr>
								<td colspan="2" style="height:45px"> </td>
							</tr>
							<tr>
								<td colspan="2">
									<span class="icon iconfont icon-kongzhitai"></span>
									<b>Band</b>
								</td>
							</tr>
							<tr>
								<td colspan="2">
									<strong>DL LNA I/P </strong>
									<span class="text-green "> (dBm)</span>
								</td>
							</tr>
							<tr>
								<td colspan="2">
									<strong>Optical Tx Power</strong>
									<span class="text-green "> (dBm)</span>
								</td>
							</tr>

							<tr>
								<td colspan="2">
									<strong>Optical Rx Power</strong>
									<span class="text-green "> (dBm)</span>
								</td>
							</tr>

							<tr>
								<td rowspan="3">
									<b>RF</b>
								</td>
								<td>UL PA ATT
									<span class="text-green ">(MHz)</span>
								</td>
							</tr>
							<tr>
								<td>DL LNA ATT
									<span class="text-green ">(MHz)</span>
								</td>
							</tr>
							<tr>
								<td>Optical ATT
									<span class="text-green ">(dB)</span>
								</td>
							</tr>

							<tr>
								<td rowspan="2">
									<b>Alarm Status</b>
								</td>
								<td>Optical Rx Fault

								</td>
							</tr>
							<tr>
								<td>Optical1 Tx Fault
								</td>
							</tr>

							<tbody>
					</table>
				</div>

				<!-- 数据循环 -->
				<div class="col-xs-2 hover">
					<table class="table res table-bordered  dataTable">
						<tbody>
							<tr>
								<td style="height:45px">
									<div class="viswCard">

										<el-button type="success" :disabled="!canSave" size="mini">Reset
										</el-button>

										<el-button type="primary" size="mini">Back
										</el-button>
									</div>
								</td>
							</tr>
							<tr>
								<td>1st Band</td>
							</tr>
							<tr>
								<td>数据...</td>
							</tr>
							<tr>
								<td>数据...</td>
							</tr>
							<tr>
								<td> 数据...</td>
							</tr>
							<tr>
								<td>
									<el-input v-model="form.tag" size="mini"></el-input>
								</td>
							</tr>
							<tr>
								<td>
									<el-input v-model="form.tag" size="mini"></el-input>
								</td>
							</tr>
							<tr>
								<td>
									<el-input v-model="form.tag" size="mini"></el-input>
								</td>
							</tr>
							<tr>
								<td style="padding: 0px 10px;">
									<i class="icon iconfont icon-on-off text-green rescss"></i>
								</td>
							</tr>
							<tr>
								<td style="padding: 0px 10px;">
									<i class="icon iconfont icon-off  rescss"></i>
								</td>
							</tr>


						</tbody>
					</table>
				</div>

				<!-- 数据循环 -->
				<div class="col-xs-2 hover">
					<table class="table res table-bordered  dataTable">
						<tbody>
							<tr>
								<td style="height:45px">
									<div class="viswCard">


										<el-button type="success" :disabled="!canSave" size="mini">Reset
										</el-button>


										<el-button type="primary" size="mini">Back
										</el-button>
									</div>
								</td>
							</tr>
							<tr>
								<td>2nd Band</td>
							</tr>
							<tr>
								<td>数据...</td>
							</tr>
							<tr>
								<td>数据...</td>
							</tr>
							<tr>
								<td> 数据...</td>
							</tr>
							<tr>
								<td>
									<el-input v-model="form.tag" size="mini"></el-input>
								</td>
							</tr>
							<tr>
								<td>
									<el-input v-model="form.tag" size="mini"></el-input>
								</td>
							</tr>
							<tr>
								<td>
									<el-input v-model="form.tag" size="mini"></el-input>
								</td>
							</tr>
							<tr>
								<td style="padding: 0px 10px;">
									<i class="icon iconfont icon-on-off text-green rescss"></i>
								</td>
							</tr>
							<tr>
								<td style="padding: 0px 10px;">
									<i class="icon iconfont icon-off  rescss"></i>
								</td>
							</tr>


						</tbody>
					</table>
				</div>




			</div>
		</div>

	</div>
	</div>
	<!--   Trap Destinations-->


	<script type="text/javascript" src="assets/js/jquery.js"></script>
	<script type="text/javascript" src="assets/js/vue.js"></script>
	<script type="text/javascript" src="assets/js/index.js"></script>
	<script type="text/javascript" src="assets/js/comment.js"></script>
	<script>
		let data = {
			app: "",
			dataimg: true,
			databox: false,
			canSave: true,
			Read: true,

			Rocdata: [],
			Roclength: 0,
			heliosUser: heliosUser[0] == $session,
			heliosUser1: heliosUser[3] == $session,


			form: {
				name: "数据...",
				name1: false
			},
		}
		var Helios = new Vue({
			el: "#content",
			data: data,

			mounted() {
				$("body").resize();

				this.getrocdata();

			},
			beforeMount() {
				/* 	this.Getroc_Data(); */
			},
			updated() {
				//console.log("==更新成功==");
				//	console.log(this.$data.Rocdata);
			},
			methods: {
				getrocdata() {
					var obj1 = [236, 1, 122, 1];
					var obj = {
						"data": obj1.join(),
						"action": "READ_SINGLE"
					}
					util.HeliosReadAjax(obj, function (data) {
						var getdata = [];
						var data = data.data;
						console.log(data);
					});
				},


				/* (9,10) 使能 范围 0-3 */
				Getroc_Data(index) {
					util.SetHeliosDevMsg();
					if (index >= 0) {
						this.$data.Read = false;
					}
					var obj1 = [6, 7, 8, 1, 2, 4, 5, 3, 13, 14, 9, 10, 15, 16];
					var obj = {
						"data": obj1.join(),
						"action": "READ"
					}
					setTimeout(function () {
						util.HeliosReadAjax(obj, function (data) {
							var getdata = [];
							var data = data.data;

							if (data.length > 0) {
								if (index >= 0) {
									setTimeout(() => {
										Helios.$data.Read = true;
										util.success('success');
									}, 550);
								}
								for (var i = 0; i < data.length; i++) {
									if (data[i].adr == 6) {
										let obj = {
											name: "UL O/P (DSP)",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										Helios.Roclength = obj.value.length;
										getdata.push(obj);
									}
									if (data[i].adr == 7) {
										let obj = {
											name: "DL I/P (DSP)",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}
									if (data[i].adr == 8) {
										let obj = {
											name: "ROC FEEDBACK",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}
									if (data[i].adr == 1) {
										let obj = {
											name: "UL Freq",
											adr: data[i].adr,
											//value: data[i].value.split(","),
											value: util.divide(data[i].value.split(","), 0),
										}
										getdata.push(obj);
									}
									if (data[i].adr == 2) {
										let obj = {
											name: "DL Freq",
											adr: data[i].adr,
											value: util.divide(data[i].value.split(","), 0),
										}
										getdata.push(obj);
									}

									if (data[i].adr == 4) {
										let obj = {
											name: "UL_ATT",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}
									if (data[i].adr == 5) {
										let obj = {
											name: "DL_ATT",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}
									if (data[i].adr == 3) {
										let obj = {
											name: "BW",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}
									if (data[i].adr == 13) {
										let obj = {
											name: "DL_PIN_LP",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}
									if (data[i].adr == 14) {
										let obj = {
											name: "PIN_OP_TH",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}

									if (data[i].adr == 9) {
										let obj = util.ResTruefalseArray("DL I/P Underpower Alarm", data[i].adr, data[i].value.split(","));
										getdata.push(obj);
									}
									if (data[i].adr == 10) {
										let obj = util.ResTruefalseArray("DL I/P Overpower  Alarm ", data[i].adr, data[i].value.split(","));
										getdata.push(obj);
									}
									if (data[i].adr == 15) {
										let obj = {
											name: "TDD_WORKMODE",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}
									if (data[i].adr == 16) {
										let obj = {
											name: "SYNC_SOURCE",
											adr: data[i].adr,
											value: data[i].value.split(",")
										}
										getdata.push(obj);
									}
								}
								setTimeout(function () {
									Helios.dataimg = false;
									Helios.databox = true;
								}, 1500);
								Helios.Rocdata = getdata;
							} else {
								util.error("Error");
							}

						});

					}, 100);


				},

				Setroc_Data: function (index) {
					util.SetHeliosDevMsg();
					Helios.$data.canSave = false;
					var adr = [1, 2, 3, 4, 5, 13, 14, 9, 10, 15, 16];
					var data = [];
					let start = {
						adr: 204,
						value: "1"
					}
					data.push(start);

					for (var j = 0; j < Helios.Rocdata.length; j++) {
						let obj = {
							adr: "",
							value: ""
						}
						/* //获取6条 */
						var RocdataValue = Helios.Rocdata[j].value;

						var agent = Helios.Rocdata[j].agent;
						var enbale = Helios.Rocdata[j].enbale;

						if (Helios.Rocdata[j].adr == 1) {
							obj.adr = Helios.Rocdata[j].adr;
							/* //设置第几条 */
							RocdataValue[index] = (Helios.Rocdata[j].value[index]);
							//obj.value = RocdataValue.join();
							obj.value = util.divide(RocdataValue, 1),
								data.push(obj)
							/* //console.log(Helios.Rocdata[j].value[index]); */
						}
						if (Helios.Rocdata[j].adr == 2) {
							obj.adr = Helios.Rocdata[j].adr;
							RocdataValue[index] = (Helios.Rocdata[j].value[index]);
							obj.value = util.divide(RocdataValue, 1),
								data.push(obj)
						}

						if (Helios.Rocdata[j].adr == 3) {
							obj.adr = Helios.Rocdata[j].adr;
							RocdataValue[index] = (Helios.Rocdata[j].value[index]);
							obj.value = RocdataValue.join();
							data.push(obj)
						}
						if (Helios.Rocdata[j].adr == 4) {
							obj.adr = Helios.Rocdata[j].adr;
							RocdataValue[index] = (Helios.Rocdata[j].value[index]);
							obj.value = RocdataValue.join();
							data.push(obj)
						}
						if (Helios.Rocdata[j].adr == 5) {
							obj.adr = Helios.Rocdata[j].adr;
							RocdataValue[index] = Helios.Rocdata[j].value[index];
							obj.value = RocdataValue.join();
							data.push(obj)
						}
						if (Helios.Rocdata[j].adr == 13) {
							obj.adr = Helios.Rocdata[j].adr;
							RocdataValue[index] = Helios.Rocdata[j].value[index];
							obj.value = RocdataValue.join();
							data.push(obj)
						}

						/* if (Helios.Rocdata[j].adr == 14) {
							obj.adr = Helios.Rocdata[j].adr;
							obj.value = Helios.Rocdata[j].value[index];
							data.push(obj)
						}
							
						if (Helios.Rocdata[j].adr == 9) {
							obj.adr = Helios.Rocdata[j].adr;
							obj.value = Helios.resnumber(Helios.Rocdata[j].agent[index], Helios.Rocdata[j].enbale[index]);
							data.push(obj);
						} */

						if (Helios.Rocdata[j].adr == 14) {
							obj.adr = Helios.Rocdata[j].adr;
							RocdataValue[index] = Helios.Rocdata[j].value[index];
							obj.value = RocdataValue.join();
							data.push(obj)
						}

						if (Helios.Rocdata[j].adr == 9) {
							obj.adr = Helios.Rocdata[j].adr;
							/* //  一个重点**** */
							agent[index] = (Helios.Rocdata[j].agent[index]);
							enbale[index] = (Helios.Rocdata[j].enbale[index]);
							obj.value = util.resnumberArray(agent, enbale);
							data.push(obj);
						}
						if (Helios.Rocdata[j].adr == 10) {
							obj.adr = Helios.Rocdata[j].adr;
							/* //  一个重点**** */
							agent[index] = (Helios.Rocdata[j].agent[index]);
							enbale[index] = (Helios.Rocdata[j].enbale[index]);
							obj.value = util.resnumberArray(agent, enbale);
							data.push(obj);
						}
						if (Helios.Rocdata[j].adr == 15) {
							obj.adr = Helios.Rocdata[j].adr;
							RocdataValue[index] = Helios.Rocdata[j].value[index];
							obj.value = RocdataValue.join();
							data.push(obj)
						}
						if (Helios.Rocdata[j].adr == 16) {
							obj.adr = Helios.Rocdata[j].adr;
							RocdataValue[index] = Helios.Rocdata[j].value[index];
							obj.value = RocdataValue.join();
							data.push(obj)
						}
					}

					let end = {
						adr: 205,
						value: "1"
					}
					data.push(end);

					var obj = {
						"data": JSON.stringify(data),
						"action": "SET"
					}
					//adr =1 ,adr=2
					var obj2 = {
						adr1val: "",
						adr2val: "",
					}

					//****重点****
					data.find(function (v, i) {
						if (1 == v.adr || 2 == v.adr) {
							if (1 == v.adr) {
								obj2.adr1val = v.value
							} else {
								obj2.adr2val = v.value
							}
						}

					});

					if (false == obj2.adr1val || false == obj2.adr2val) {
						return false;
					} else {
						setTimeout(function () {
							util.postattrajax(obj, function (data) {
								if (1 != data) {
									toast.$message({
										message: ' Error' + data,
										type: 'error',
										showClose: true,
										offset: 40
									});
								} else {
									setTimeout(() => {
										Helios.$data.canSave = true;
										util.success('success');
									}, 100);
								}
							});
						}, 100);
					}
				},


			},
			filters: {
				bandname: function (value) {
					if (0 == value) {
						return "1st Band"
					} else if (1 == value) {
						return "2nd Band"
					}
					if (2 == value) {
						return "3rd Band"
					} else if (3 == value) {
						return "4th Band"
					} else if (4 == value) {
						return "5th Band"
					} else if (5 == value) {
						return "6th Band"
					}
				}
			}
		});
	</script>

</body>

</html>